---
apiVersion: v1
kind: Namespace
metadata:
  name: compact-cluster-1
---
apiVersion: v1
kind: Secret
metadata:
  name: pull-secret-compact-cluster-1
  namespace: compact-cluster-1
stringData:
  .dockerconfigjson: '{"auths":{"registry.ci.openshift.org":{"auth":"dXNlcjiZ3dasdNTSFffsafzJubE80LVYngtMlRGdw=="},"registry.svc.ci.openshift.org":{"auth":"dasdaddjo3b1NwNlpYX2kyVLacctNcU9F"},"quay.io":{"auth":"b3BlbnNoaWZ0LXJlbGGMVlTNkk1NlVQUQ==","lab-installer.lab-net:5000":{"auth":"ZHVtbXk6ZHVtbXk=","email":"jhendrix@karmalabs.com"}}}'
  type: kubernetes.io/dockerconfigjson
---
apiVersion: extensions.hive.openshift.io/v1beta1
kind: AgentClusterInstall
metadata:
  name: compact-cluster-1
  namespace: compact-cluster-1
spec:
  clusterDeploymentRef:
    name: compact-cluster-1
  imageSetRef:
    name: openshift-v4.9.0
  apiVIP: "2620:52:0:1303::3"
  ingressVIP: "2620:52:0:1303::2"
  networking:
    clusterNetwork:
      - cidr: "fd01::/48"
        hostPrefix: 64
    serviceNetwork:
      - "fd02::/112"
  provisionRequirements:
    controlPlaneAgents: 3
  sshPublicKey: 'ssh-rsa adasdlkasjdlklaskdjadoipjasdoiasj root@xxxxXXXXxxx'
---
apiVersion: hive.openshift.io/v1
kind: ClusterDeployment
metadata:
  name: compact-cluster-1
  namespace: compact-cluster-1
spec:
  baseDomain: kubeframe.local
  clusterName: compact-cluster-1
  controlPlaneConfig:
    servingCertificates: {}
  clusterInstallRef:
    group: extensions.hive.openshift.io
    kind: AgentClusterInstall
    name: compact-cluster-1
    version: v1beta1
  platform:
    agentBareMetal:
      agentSelector:
        matchLabels:
          cluster-name: "compact-cluster-1"
  pullSecretRef:
    name: pull-secret-compact-cluster-1
---
apiVersion: agent.open-cluster-management.io/v1
kind: KlusterletAddonConfig
metadata:
  name: compact-cluster-1
  namespace: compact-cluster-1
spec:
  clusterName: compact-cluster-1
  clusterNamespace: compact-cluster-1
  clusterLabels:
    name: compact-cluster-1
    cloud: Baremetal
  applicationManager:
    argocdCluster: false
    enabled: true
  certPolicyController:
    enabled: true
  iamPolicyController:
    enabled: true
  policyController:
    enabled: true
  searchCollector:
    enabled: true
---
apiVersion: cluster.open-cluster-management.io/v1
kind: ManagedCluster
metadata:
  name: compact-cluster-1
  namespace: compact-cluster-1
  labels:
    name: compact-cluster-1
    kubeframe: "true"
spec:
  hubAcceptsClient: true
  leaseDurationSeconds: 60
---
apiVersion: agent-install.openshift.io/v1beta1
kind: InfraEnv
metadata:
 name: 'compact-cluster-1'
 namespace: 'compact-cluster-1'
spec:
 clusterRef:
   name: 'compact-cluster-1'
   namespace: 'compact-cluster-1'
 pullSecretRef:
   name: 'pull-secret-compact-cluster-1'
 nmStateConfigLabelSelector:
   matchLabels:
     nmstate_config_cluster_name: compact-cluster-1
 sshAuthorizedKey: 'ssh-rsa adasdlkasjdlklaskdjadoipjasdoiasj root@xxxxXXXXxxx' 
